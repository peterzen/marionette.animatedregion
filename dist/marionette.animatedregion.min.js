/*! marionette.animatedregion - v0.2.1
 *  Release on: 2014-12-30
 *  Copyright (c) 2014 St√©phane Bachelier
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define(["marionette","underscore","motioncontrol"],function(c,d,e){return a.AnimatedRegion=b(c,d,e)}):"object"==typeof exports?module.exports=b(require("marionette"),require("underscore"),require("motioncontrol")):a.AnimatedRegion=b(Marionette,_,motioncontrol)}(this,function(a,b,c){"use strict";var d=a.Region.extend({attachHtml:function(c){var d=new MutationObserver(function(){d.disconnect(),this.animateView(c,"in")}.bind(this)),e={attributes:!1,childList:!0,characterData:!1};d.observe(this.el,e),this.isViewSupportingAnimation=!b.isEmpty(c.animationClassName),a.Region.prototype.attachHtml.call(this,c)},close:function(){var a=this.currentView;if(!a)return this;var b=this.animateView(a,"out");return!1===b?(this.empty(),this):b.then(this.empty)},animateView:function(a,d){d=d||"in";var e=this;return c(a.el,{trigger:b.result(e,"_launchAnimation")}).then(function(){e.isViewSupportingAnimation&&e.triggerMethod("animated:view:"+d,a)})},_launchAnimation:function(a,c){var d="animateView"+c.charAt(0).toUpperCase()+c.substring(1),e=this[d];return this.isViewSupportingAnimation&&b.isFunction(e)?e.call(this,a):this.isViewSupportingAnimation},animateViewIn:function(a){a.el.classList.add(a.animationClassName),a.el.classList.add(a.animation["in"])},onAnimatedViewIn:function(a){a.el.classList.remove(a.animationClassName),a.el.classList.remove(a.animation["in"])},animateViewOut:function(a){a.el.classList.add(a.animationClassName),a.el.classList.add(a.animation.out)},onAnimatedViewOut:function(a){a.el.classList.remove(a.animationClassName),a.el.classList.remove(a.animation.out)}});return a.AnimatedRegion=d,d});